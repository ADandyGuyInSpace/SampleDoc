description: Record of all attempts to deliver a webhook.
properties:
  attempts:
    description: Detailed delivery attempts, ordered by most recent.
    example:
      - finished_at: '2020-08-10T14:00:05.595Z'
        http:
          request:
            headers:
              - 'Accept: */*'
            url: https://fallback.example.com/webhooks
          response:
            body: All good.
            headers:
              - 'Content-Type: text/html'
            status: 200
        started_at: '2020-08-10T14:00:05.364Z'
        status: delivered
      - errors:
          - code: '75499'
            detail: The server returned another HTTP 4XX error
            title: Webhook host returned HTTP 4XX
        finished_at: '2020-08-10T14:00:05.360Z'
        http:
          request:
            headers:
              - 'Accept: */*'
            url: https://typo.example.com/webhooks
          response:
            body: Oops. Not found.
            headers:
              - 'Content-Type: text/html'
              - 'Pragma: no-cache'
            status: 404
        started_at: '2020-08-10T14:00:05.004Z'
        status: failed
    items:
      $ref: ./attempt.yaml
    type: array
  finished_at:
    description: >-
      ISO 8601 timestamp indicating when the last webhook response has been
      received.
    example: '2020-08-10T14:00:05.595Z'
    format: date-time
    type: string
  id:
    description: Uniquely identifies the webhook_delivery record.
    example: f5586561-8ff0-4291-a0ac-84fe544797bd
    format: uuid
    type: string
  record_type:
    description: Identifies the type of the resource.
    example: webhook_delivery
    type: string
  started_at:
    description: >-
      ISO 8601 timestamp indicating when the first request attempt was
      initiated.
    example: '2020-08-10T14:00:00.000Z'
    format: date-time
    type: string
  status:
    description: >-
      Delivery status: 'delivered' when successfuly delivered or 'failed' if all
      attempts have failed.
    enum:
      - delivered
      - failed
    type: string
  user_id:
    description: Uniquely identifies the user that owns the webhook_delivery record.
    example: 0ccc7b54-4df3-4bca-a65a-3da1ecc777f0
    format: uuid
    type: string
  webhook:
    description: Original webhook JSON data. Payload fields vary according to event type.
    example:
      event_type: call_initiated
      id: C9C0797E-901D-4349-A33C-C2C8F31A92C2
      occurred_at: '2020-08-10T13:02:01.000Z'
      payload:
        useful: information
      record_type: event
    properties:
      event_type:
        description: The type of event being delivered.
        enum:
          - webhook.command
        example: webhook.command
        type: string
      id:
        description: Identifies the type of resource.
        example: 0ccc7b54-4df3-4bca-a65a-3da1ecc777f0
        format: uuid
        type: string
      occurred_at:
        description: ISO 8601 datetime of when the event occurred.
        example: '2018-02-02T22:25:27.521992Z'
        format: date-time
        type: string
      payload:
        properties: {}
        type: object
      record_type:
        description: Identifies the type of the resource.
        enum:
          - event
        example: event
        type: string
    type: object
